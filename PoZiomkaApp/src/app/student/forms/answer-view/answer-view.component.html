<app-popup
  (outsideClicked)="hide.emit()"
  (closeClicked)="hide.emit()"
  [size]="'col-10 col-sm-8 col-lg-6 col-xl-4'"
>
  <div class="p-md-5 p-3 scrollable-content" *ngIf="formContent() as form">
    <h3>Odpowiedzi ucznia</h3>

    <form class="mt-3">
      <div *ngFor="let pref of form.obligatoryPreferences" class="mb-4">
        <label class="form-label fw-bold">
          {{ pref.name }}
          <span class="text-danger">*</span>
        </label>
        <div *ngFor="let option of pref.options" class="form-check">
          <input
            class="form-check-input"
            type="radio"
            name="pref-{{ pref.id }}"
            [value]="option.id"
            [checked]="selectedAnswers()[pref.id] === option.id"
            [disabled]="true"
            id="opt-{{ pref.id }}-{{ option.id }}"
          />
          <label class="form-check-label" [for]="'opt-' + pref.id + '-' + option.id">
            {{ option.name }}
          </label>
        </div>
      </div>

      <div class="mb-4">
        <label class="form-label fw-bold">Odpowiedzi otwarte</label>
        <div class="mt-2">
          <span
            class="badge bg-secondary me-2 mb-1"
            *ngFor="let answer of choosableAnswers()"
          >
            {{ answer }}
          </span>
        </div>
      </div>
      

      <div class="d-flex gap-2 mt-3">
        <button
          type="submit"
          class="btn btn-success flex-grow-1"
          (click)="openEdit()"
          [disabled]="isSubmitting()"
        >
          Edytuj odpowiedzi
        </button>
      
        <button
          type="button"
          class="btn btn-danger flex-grow-1"
          (click)="onDelete()"
          [disabled]="isSubmitting()"
        >
          Usu≈Ñ odpowiedzi
        </button>
      </div>
      
    </form>
  </div>
</app-popup>

  @if(showEdit && formContent() && answer()){
    <app-answer-edit
    [formContent]="formContent()!"
    [existingAnswer]="answer()"
    (hide)="hideEdit()"
  ></app-answer-edit>
  }